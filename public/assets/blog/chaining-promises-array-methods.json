{"title":"Async Await usage and pitfalls in Array.prototype.map() and chaining","description":"Using async await in array methods is quite tricky. But it gets even trickier when you chain multiple array methods. Find out how.","date":"29 Sep, 2020 3:35 PM","published":true,"cover_image":"/assets//media/blog-social-intro.png","body":"<p>Let's consider the code below</p>\n<pre class=\"shiki\" style=\"background-color: #282c34\"><code><span class=\"line\"><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">IDs</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">[</span><span style=\"color: #FF78F8\">1</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF78F8\">2</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF78F8\">3</span><span style=\"color: #7A82DA\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">usersData</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> IDs</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">map</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #10B1FE\">async</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">(</span><span style=\"color: #8BCDEF\">id</span><span style=\"color: #7A82DA\">)</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">await</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #3FC56B\">getUserData</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">id</span><span style=\"color: #7A82DA\">));</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">console</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">log</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">usersData</span><span style=\"color: #7A82DA\">);</span></span>\n<span class=\"line\"></span></code></pre>\n<p>What would this output?</p>\n<pre class=\"shiki\" style=\"background-color: #282c34\"><code><span class=\"line\"><span style=\"color: #7A82DA\">[</span><span style=\"color: #FF6480\">Promise</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF6480\">Promise</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF6480\">Promise</span><span style=\"color: #7A82DA\">];</span></span>\n<span class=\"line\"></span></code></pre>\n<p>All these are promises. But we are expecting data as objects(or whatever other format you can think of) here. How do <code>await</code> every single array item?</p>\n<p>The solution here is <code>Promise.all</code>. Quick recap:</p>\n<p><code>Promise.all</code> takes in an array of promises, runs them concurrently until they <code>all</code> resolve, and return a bigger <code>promise</code> with the outcomes from those promises as resolved values as an Array</p>\n<p>For example</p>\n<pre class=\"shiki\" style=\"background-color: #282c34\"><code><span class=\"line\"><span style=\"color: #10B1FE\">await</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF6480\">Promise</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">all</span><span style=\"color: #7A82DA\">([</span><span style=\"color: #3FC56B\">getUserData</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #FF78F8\">1</span><span style=\"color: #7A82DA\">),</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #3FC56B\">getUserData</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #FF78F8\">2</span><span style=\"color: #7A82DA\">),</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #3FC56B\">getUserData</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #FF78F8\">3</span><span style=\"color: #7A82DA\">)]);</span></span>\n<span class=\"line\"></span></code></pre>\n<p>will return</p>\n<pre class=\"shiki\" style=\"background-color: #282c34\"><code><span class=\"line\"><span style=\"color: #7A82DA\">[</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #7A82DA\">{</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #CE9887\">id</span><span style=\"color: #7A82DA\">:</span><span style=\"color: #CE9887\"> </span><span style=\"color: #FF78F8\">1</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">...</span><span style=\"color: #ABB2BF\">otherData</span><span style=\"color: #CE9887\"> </span><span style=\"color: #7A82DA\">},</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #7A82DA\">{</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #CE9887\">id</span><span style=\"color: #7A82DA\">:</span><span style=\"color: #CE9887\"> </span><span style=\"color: #FF78F8\">2</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">...</span><span style=\"color: #ABB2BF\">otherData</span><span style=\"color: #CE9887\"> </span><span style=\"color: #7A82DA\">},</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #7A82DA\">{</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #CE9887\">id</span><span style=\"color: #7A82DA\">:</span><span style=\"color: #CE9887\"> </span><span style=\"color: #FF78F8\">3</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">...</span><span style=\"color: #ABB2BF\">otherData</span><span style=\"color: #CE9887\"> </span><span style=\"color: #7A82DA\">},</span></span>\n<span class=\"line\"><span style=\"color: #7A82DA\">];</span></span>\n<span class=\"line\"></span></code></pre>\n<p>If you think about it, the code snippet where we're mapping over IDs is just an Array of Promises. We can directly <code>Promise.all</code> that array</p>\n<pre class=\"shiki\" style=\"background-color: #282c34\"><code><span class=\"line\"><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">IDs</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">[</span><span style=\"color: #FF78F8\">1</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF78F8\">2</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF78F8\">3</span><span style=\"color: #7A82DA\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">usersDataPromises</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> IDs</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">map</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #10B1FE\">async</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">(</span><span style=\"color: #8BCDEF\">id</span><span style=\"color: #7A82DA\">)</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">await</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #3FC56B\">getUserData</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">id</span><span style=\"color: #7A82DA\">));</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">usersData</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">await</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF6480\">Promise</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">all</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">usersDataPromises</span><span style=\"color: #7A82DA\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">console</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">log</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">usersData</span><span style=\"color: #7A82DA\">);</span></span>\n<span class=\"line\"></span></code></pre>\n<p>That would output us the same object as above</p>\n<pre class=\"shiki\" style=\"background-color: #282c34\"><code><span class=\"line\"><span style=\"color: #7A82DA\">[</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #7A82DA\">{</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #CE9887\">id</span><span style=\"color: #7A82DA\">:</span><span style=\"color: #CE9887\"> </span><span style=\"color: #FF78F8\">1</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">...</span><span style=\"color: #ABB2BF\">otherData</span><span style=\"color: #CE9887\"> </span><span style=\"color: #7A82DA\">},</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #7A82DA\">{</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #CE9887\">id</span><span style=\"color: #7A82DA\">:</span><span style=\"color: #CE9887\"> </span><span style=\"color: #FF78F8\">2</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">...</span><span style=\"color: #ABB2BF\">otherData</span><span style=\"color: #CE9887\"> </span><span style=\"color: #7A82DA\">},</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #7A82DA\">{</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #CE9887\">id</span><span style=\"color: #7A82DA\">:</span><span style=\"color: #CE9887\"> </span><span style=\"color: #FF78F8\">3</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">...</span><span style=\"color: #ABB2BF\">otherData</span><span style=\"color: #CE9887\"> </span><span style=\"color: #7A82DA\">},</span></span>\n<span class=\"line\"><span style=\"color: #7A82DA\">];</span></span>\n<span class=\"line\"></span></code></pre>\n<h1 id=\"Tricky-part\"><a class=\"heading-link\" href=\"./chaining-promises-array-methods#Tricky-part\">#</a>Tricky part</h1>\n<p>The trick above works like a charm. However, difficulty arises when you chain another array method to the existing array, like this</p>\n<pre class=\"shiki\" style=\"background-color: #282c34\"><code><span class=\"line\"><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">IDs</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">[</span><span style=\"color: #FF78F8\">1</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF78F8\">2</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF78F8\">3</span><span style=\"color: #7A82DA\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">usersDataPromise</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> IDs</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">map</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #10B1FE\">async</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">(</span><span style=\"color: #8BCDEF\">id</span><span style=\"color: #7A82DA\">)</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">await</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #3FC56B\">getUserData</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">id</span><span style=\"color: #7A82DA\">)).</span><span style=\"color: #3FC56B\">map</span><span style=\"color: #7A82DA\">(</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #10B1FE\">async</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">(</span><span style=\"color: #8BCDEF\">data</span><span style=\"color: #7A82DA\">)</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">await</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #3FC56B\">getPosts</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">data</span><span style=\"color: #7A82DA\">)</span></span>\n<span class=\"line\"><span style=\"color: #7A82DA\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">usersData</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF6480\">Promise</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">all</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">usersDataPromise</span><span style=\"color: #7A82DA\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">console</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">log</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">usersData</span><span style=\"color: #7A82DA\">);</span></span>\n<span class=\"line\"></span></code></pre>\n<p>It will return an error. Why?</p>\n<p><code>Promise.all</code> tries to run all promises at once. And I mean, <strong>All of them</strong>. It will try to run the 2nd <code>map</code> <strong>alongside</strong> the first map. You can see for yourself this is a problem, as the second <code>map</code> depends on the value from the first.</p>\n<p>How do we resolve this (Pun intended <img class=\"emoji\" draggable=\"false\" alt=\"ðŸ˜Ž\" src=\"https://twemoji.maxcdn.com/v/13.0.2/svg/1f60e.svg\">)?</p>\n<h1 id=\"Solutions\"><a class=\"heading-link\" href=\"./chaining-promises-array-methods#Solutions\">#</a>Solutions</h1>\n<p>There can be many ways to solve this problem. I will share 2 here</p>\n<h2 id=\"1st\"><a class=\"heading-link\" href=\"./chaining-promises-array-methods#1st\">#</a>1st</h2>\n<p><code>Promise.all</code> at every single step</p>\n<pre class=\"shiki\" style=\"background-color: #282c34\"><code><span class=\"line\"><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">IDs</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">[</span><span style=\"color: #FF78F8\">1</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF78F8\">2</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF78F8\">3</span><span style=\"color: #7A82DA\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">usersData</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">await</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF6480\">Promise</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">all</span><span style=\"color: #7A82DA\">(</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  IDs</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">map</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #10B1FE\">async</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">(</span><span style=\"color: #8BCDEF\">id</span><span style=\"color: #7A82DA\">)</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">await</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #3FC56B\">getUserData</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">id</span><span style=\"color: #7A82DA\">))</span></span>\n<span class=\"line\"><span style=\"color: #7A82DA\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">usersPosts</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">await</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF6480\">Promise</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">all</span><span style=\"color: #7A82DA\">(</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  usersData</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">map</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #10B1FE\">async</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">(</span><span style=\"color: #8BCDEF\">userData</span><span style=\"color: #7A82DA\">)</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">=&gt;</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">await</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #3FC56B\">getPosts</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">userData</span><span style=\"color: #7A82DA\">))</span></span>\n<span class=\"line\"><span style=\"color: #7A82DA\">);</span></span>\n<span class=\"line\"></span></code></pre>\n<h2 id=\"2nd\"><a class=\"heading-link\" href=\"./chaining-promises-array-methods#2nd\">#</a>2nd</h2>\n<p>A plain old <code>for of</code> loop:</p>\n<pre class=\"shiki\" style=\"background-color: #282c34\"><code><span class=\"line\"><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">IDs</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">[</span><span style=\"color: #FF78F8\">1</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF78F8\">2</span><span style=\"color: #7A82DA\">,</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #FF78F8\">3</span><span style=\"color: #7A82DA\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">usersPosts</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">[];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #10B1FE\">for</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">(</span><span style=\"color: #10B1FE\">let</span><span style=\"color: #ABB2BF\"> id </span><span style=\"color: #10B1FE\">of</span><span style=\"color: #ABB2BF\"> IDs</span><span style=\"color: #7A82DA\">)</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">{</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">userData</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">await</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #3FC56B\">getUsersData</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">id</span><span style=\"color: #7A82DA\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  </span><span style=\"color: #10B1FE\">const</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #9F7EFE\">userPosts</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #7A82DA\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #10B1FE\">await</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #3FC56B\">getPosts</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">userData</span><span style=\"color: #7A82DA\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">  usersPosts</span><span style=\"color: #7A82DA\">.</span><span style=\"color: #3FC56B\">push</span><span style=\"color: #7A82DA\">(</span><span style=\"color: #ABB2BF\">userPosts</span><span style=\"color: #7A82DA\">);</span></span>\n<span class=\"line\"><span style=\"color: #7A82DA\">}</span></span>\n<span class=\"line\"></span></code></pre>\n<p>I prefer the 2nd approach. If you wanna add an extra step, you simply add an extra line, whereas the 2st will require a whole extra <code>Promise.all(array map)</code>, which ultimately is just code redundancy.</p>\n","id":"chaining-promises-array-methods","reading_time":3.53,"toc":[{"indent":0,"id":"","title":"Tricky part","length":11},{"indent":0,"id":"","title":"Solutions","length":9},{"indent":1,"id":"","title":"1st","length":3},{"indent":1,"id":"","title":"2nd","length":3}]}